!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common/http"),require("@backbase/foundation-ang/data-http")):"function"==typeof define&&define.amd?define("@backbase/drupal-http-module-ang",["exports","@angular/core","@angular/common/http","@backbase/foundation-ang/data-http"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).backbase=e.backbase||{},e.backbase["drupal-http-module-ang"]={}),e.ng.core,e.ng.common.http,e.dataHttp)}(this,(function(e,t,n,o){"use strict";function r(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var o=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,o.get?o:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var a=r(t),i=r(n),s=new t.InjectionToken("CMS_BASE_PATH"),c=function(){function e(e){var t=this;void 0===e&&(e={}),this.apiKeys=e.apiKeys,this.username=e.username,this.password=e.password,this.accessToken=e.accessToken,this.basePath=e.basePath,this.withCredentials=e.withCredentials,this.encoder=e.encoder,e.credentials?this.credentials=e.credentials:this.credentials={},this.credentials.csrf_token||(this.credentials.csrf_token=function(){return t.apiKeys.csrf_token||t.apiKeys["X-CSRF-Token"]})}return e.prototype.selectHeaderContentType=function(e){var t=this;if(0!==e.length){var n=e.find((function(e){return t.isJsonMime(e)}));return void 0===n?e[0]:n}},e.prototype.selectHeaderAccept=function(e){var t=this;if(0!==e.length){var n=e.find((function(e){return t.isJsonMime(e)}));return void 0===n?e[0]:n}},e.prototype.isJsonMime=function(e){var t=new RegExp("^(application/json|[^;/ \t]+/[^;/ \t]+[+]json)[ \t]*(;.*)?$","i");return null!==e&&(t.test(e)||"application/json-patch+json"===e.toLowerCase())},e.prototype.lookupCredential=function(e){var t=this.credentials[e];return"function"==typeof t?t():t},e}(),d=new t.InjectionToken("api-data-module CMSConfiguration"),u=function(){function e(e,t,n,o){if(e)throw new Error("CMSApiModule is already loaded. Import in your base AppModule only.");if(!t)throw new Error("You need to import the HttpClientModule in your AppModule! \nSee also https://github.com/angular/angular/issues/20575");n&&n.setModuleConfig(d,{apiRoot:"",servicePath:o.basePath||"",headers:{}})}return e.forRoot=function(t){return{ngModule:e,providers:[{provide:c,useFactory:t}]}},e}();u.decorators=[{type:t.NgModule,args:[{imports:[],declarations:[],exports:[],providers:[]}]}],u.ctorParameters=function(){return[{type:u,decorators:[{type:t.Optional},{type:t.SkipSelf}]},{type:n.HttpClient,decorators:[{type:t.Optional}]},{type:o.DataModulesManager,decorators:[{type:t.Optional}]},{type:c}]};var p=function(){function e(){}return e.prototype.encodeKey=function(e){return encodeURIComponent(e)},e.prototype.encodeValue=function(e){return encodeURIComponent(e)},e.prototype.decodeKey=function(e){return decodeURIComponent(e)},e.prototype.decodeValue=function(e){return decodeURIComponent(e)},e}(),l=function(){function e(e,t,o){this.httpClient=e,this.basePath="",this.defaultHeaders=new n.HttpHeaders,this.configuration=new c,o&&(this.configuration=o),"string"!=typeof this.configuration.basePath&&("string"!=typeof t&&(t=this.basePath),this.configuration.basePath=t),this.encoder=this.configuration.encoder||new p}return e.prototype.addToHttpParams=function(e,t,n){return e="object"==typeof t&&t instanceof Date==!1?this.addToHttpParamsRecursive(e,t):this.addToHttpParamsRecursive(e,t,n)},e.prototype.addToHttpParamsRecursive=function(e,t,n){var o=this;if(null==t)return e;if("object"==typeof t)if(Array.isArray(t))t.forEach((function(t){return e=o.addToHttpParamsRecursive(e,t,n)}));else if(t instanceof Date){if(null==n)throw Error("key may not be null if value is Date");e=e.append(n,t.toISOString().substr(0,10))}else Object.keys(t).forEach((function(r){return e=o.addToHttpParamsRecursive(e,t[r],null!=n?n+"."+r:r)}));else{if(null==n)throw Error("key may not be null if value is not object or array");e=e.append(n,t)}return e},e.prototype.entityNodeGET=function(e,t,o,r){void 0===t&&(t="body"),void 0===o&&(o=!1);var a=e.format;if(null==a)throw new Error("Required parameter format was null or undefined when calling entityNodeGET.");var i=e.node;if(null==i)throw new Error("Required parameter node was null or undefined when calling entityNodeGET.");var s=new n.HttpParams({encoder:this.encoder});null!=a&&(s=this.addToHttpParams(s,a,"_format"));var c,d=this.defaultHeaders;(c=this.configuration.lookupCredential("csrf_token"))&&(d=d.set("X-CSRF-Token",c));var u=r&&r.httpHeaderAccept;if(void 0===u){u=this.configuration.selectHeaderAccept(["application/hal+json","application/json"])}void 0!==u&&(d=d.set("Accept",u));var p="json";return u&&u.startsWith("text")&&(p="text"),this.httpClient.get(this.configuration.basePath+"/node/"+encodeURIComponent(String(i)),{params:s,responseType:p,withCredentials:this.configuration.withCredentials,headers:d,observe:t,reportProgress:o})},e.prototype.entityNodeGETUrl=function(e){var t=e.format;if(null==t)throw new Error("Required parameter format was null or undefined when calling entityNodeGET.");var o=e.node;if(null==o)throw new Error("Required parameter node was null or undefined when calling entityNodeGET.");var r=new n.HttpParams({encoder:this.encoder});null!=t&&(r=this.addToHttpParams(r,t,"_format"));var a=r.toString();return this.configuration.basePath+"/node/"+encodeURIComponent(String(o))+(a?"?"+a:"")},e}();l.ɵprov=a.ɵɵdefineInjectable({factory:function(){return new l(a.ɵɵinject(i.HttpClient),a.ɵɵinject(s,8),a.ɵɵinject(c,8))},token:l,providedIn:"root"}),l.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],l.ctorParameters=function(){return[{type:n.HttpClient},{type:String,decorators:[{type:t.Optional},{type:t.Inject,args:[s]}]},{type:c,decorators:[{type:t.Optional}]}]};var f=o.createMocks([{urlPattern:"/node/{node}",method:"GET",responses:[]}]),h=o.createMocks([{urlPattern:"/node/{node}",method:"GET",responses:[]}]);e.CMSApiModule=u,e.CMSConfiguration=c,e.CMS_BASE_PATH=s,e.COLLECTION_FORMATS={csv:",",tsv:"   ",ssv:" ",pipes:"|"},e.CONFIG_TOKEN=d,e.NodeHttpService=l,e.NodeHttpServiceEntityNodeGETMocksProvider=f,e.NodeHttpServiceMocksProvider=h,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=backbase-drupal-http-module-ang.umd.min.js.map